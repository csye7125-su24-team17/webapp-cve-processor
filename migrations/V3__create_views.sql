-- V3__create_views.sql
-- Create or replace the view to fetch the latest version of each CVE record
CREATE OR REPLACE VIEW cve.latest_cve_records AS
SELECT *
FROM cve.cve_records
WHERE (cve_id, version) IN (
    SELECT cve_id, MAX(version)
    FROM cve.cve_records
    GROUP BY cve_id
);